# Lem-in
## О проекте
### Задача:

Lem-in решает задачу о нахождении максимального потока заданного кол-ва муравьев за наименьшее кол-во строк решения.

Программа на STDIN получает карту муравьиной фермы. 
      
    ./lem-in < maps/others/map_6

Входящая карта в текстовом формате содержит:

* кол-во муравьев: n
* название комнат с координатами: name x y
* связи между ними: name1-name2
* коментарии, которые начинаются с хэш-символа: # comment
* команды ##start после которой на новой строке идет название стартовой комнаты
* команды ##end после которой на новой строке идет название завершающей комнаты 

Структуру входных данных можно разделить на три блока:

    number_of_ants
    the_rooms
    the_links

Пример валидной карты:

    3
    ##start
    0 1 0
    ##end
    1 5 0
    2 9 0
    # this is comment
    3 13 0
    0-2
    2-3
    3-1

Полученная карта преобразовывается в двусвязный граф, где ноды это комнаты, а ребра это связи между ними. Изначально муравьи находятся в стартовой комнате, их нужно переправить в конечную по правилу: в каждой комнате одновременно может находится только один муравей, исключением является начальная и конечная комната. Наконец, применяя алгоритм использующий наилучшую комбинацию путей в соответствии с количеством муравьев должен вывести в STDOUT маршруты муравьев в формате:
       
    Lx-y Lz-w Lr-o ...

* где x, z, r - это номера муравьев, 
* y, w, o - это название комнат.

Пример вывода решения:

    3
    1 0 2
    ##start
    0 2 0
    ##end
    4 2 6
    2 4 2
    3 4 4
    0-1
    0-2
    2-3
    3-4
    4-1
    
    L1-1 L2-2
    L1-4 L3-1 L2-3
    L3-4 L2-4

Требования по работе программы (в случае с 4000 комнатами):
1. Время работы: 2 или 3 секунды - отлично, 9 секунд - посредственно, 15 секунд - это слишком много.
2. Кол-во строк решения: 0 или меньше предложенной нормы генератора - отлично, на 1 или 2 линии больше - хорошо, от 3 до 10 линий - посредстенно, больше 10 - это слишком много

### Решение:
1. Двухсвязный граф преобразовываем в односвязную транспортную сеть с помощью добавления фиктивных нод. Таким образом начальная нода разбивается на две (исключением является стартовая нода из нее связи только выходят и завершающая нода в нее связи только входят): 
     * "out" нода из которой выходят все связи: node_name
     * "in" нода в которую входят все связи: #node_name
2. С помощью алгоритма Эдмондса-Карпа находим максимальный поток за наименьшее кол-во строк решения. Более подробно опишем его работу:
     * при помощи алгоритма Дейкстры с потенциалами Джонсона для нахождения кратчайшего пути в графе с отрицательными ребрами и метода Форда-Факелрсона поиска потока в остаточной сети - находим поток
     * для найденного потока расчитываем кол-во необходимых шагов для переправки муравьев от начальной ноды в конечную и запоминаем это кол-во
     * продолжаем до тех пор пока кол-во строк решения перестанет уменьшаться
3. Далее генерируем перемещения муравьёв в соответсвии с требуемым форматом вывода и выводим его в STDOUT

